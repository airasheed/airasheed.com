/**
 * Single Page Nav Plugin
 * Copyright (c) 2013 Chris Wojcik <hello@chriswojcik.net>
 * Dual licensed under MIT and GPL.
 * @author Chris Wojcik
 * @version 1.0.0
 */
if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a();};}(function(c,b,a,e){var d={init:function(g,f){this.options=c.extend({},c.fn.singlePageNav.defaults,g);this.container=f;this.$container=c(f);this.$links=this.$container.find("a");this.$window=c(b);this.$body=c("html, body");this.$container.on("click.singlePageNav","a",c.proxy(this.handleClick,this));this.didScroll=false;this.checkPosition();this.setTimer();},handleClick:function(i){var g=this,h=i.currentTarget,f=c(h.hash);if(f.length){g.clearTimer();g.setActiveLink(h.hash);g.scrollTo(f,function(){if(g.options.updateHash){a.location.hash=h.hash;}g.setTimer();});}i.preventDefault();},scrollTo:function(f,h){var g=this.getCoords(f).top;this.$body.stop().animate({scrollTop:g},{duration:this.options.speed,complete:(typeof h==="function")?h:null});},setTimer:function(){var f=this;f.$window.on("scroll.singlePageNav",function(){f.didScroll=true;});f.timer=setInterval(function(){if(f.didScroll){f.didScroll=false;f.checkPosition();}},250);},clearTimer:function(){clearInterval(this.timer);this.$window.off("scroll.singlePageNav");this.didScroll=false;},checkPosition:function(){var g=this.$window.scrollTop();var f=this.getCurrentSection(g);this.setActiveLink(f);},getCoords:function(f){return{top:Math.round(f.offset().top)-this.options.offset};},setActiveLink:function(f){var g=this.$container.find("a[href='"+f+"']");if(!g.hasClass(this.options.currentClass)){this.$links.removeClass(this.options.currentClass);g.addClass(this.options.currentClass);}},getCurrentSection:function(k){var f,j,g,h;for(f=0;f<this.$links.length;f++){j=this.$links[f].hash;if(c(j).length){g=this.getCoords(c(j));if(k>=g.top-this.options.threshold){h=j;}}}return h||this.$links[0].hash;}};c.fn.singlePageNav=function(f){return this.each(function(){var g=Object.create(d);g.init(f,this);});};c.fn.singlePageNav.defaults={offset:0,threshold:120,speed:400,currentClass:"current",updateHash:false};})(jQuery,window,document);